<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <script>
    let workerCount = 0;
    let showCount = 0;

    function addWorker() {
        const container = document.getElementById("workers_form");
        const div = document.createElement("div");
        div.innerHTML = `
            <b>Dolgoz√≥</b><br>

            <label>N√©v:
                <input type="text" name="name_${workerCount}" required>
            </label><br>

            <label>Nem √©r r√° (t√∂bb nap, vessz≈ëvel):
                <br>
                <small>Pl.: 2025-01-03, 2025-01-05</small><br>
                <input type="text" name="unavail_${workerCount}" style="width:400px">
            </label><br>

            <label>Melyik el≈ëad√°st akarja megn√©zni:
                <input type="text" name="wants_${workerCount}">
            </label><br>

            <label>√âK:
                <input type="checkbox" name="ek_${workerCount}">
            </label>
            <hr>
        `;
        container.appendChild(div);
        workerCount++;
        document.getElementById("num_workers").value = workerCount;
    }

    function addShow() {
        const container = document.getElementById("shows_form");
        const div = document.createElement("div");

        div.innerHTML = `
            <b>M≈±szak</b><br>

            <label>El≈ëad√°s c√≠me:
                <input type="text" name="title_${showCount}" required>
            </label><br>

            <label>D√°tum √©s id≈ë (YYYY-MM-DD HH:MM):
                <input type="text" name="date_${showCount}" placeholder="2025-01-05 19:00" required>
            </label><br>

            <label>H√°ny ember kell:
                <input type="number" name="need_${showCount}" min="1" max="10" value="10" 
                       onchange="toggleErkely(this, ${showCount})">
            </label><br>

            <div id="roles_${showCount}">
                <label><input type="checkbox" name="role_beulos_${showCount}"> N√©z≈ët√©r be√ºl≈ës</label><br>
                <label><input type="checkbox" name="role_csipog_${showCount}"> N√©z≈ët√©r csak csipog</label><br>
                <label><input type="checkbox" name="role_jolly_${showCount}"> Jolly joker</label><br>
                <label><input type="checkbox" name="role_bal_${showCount}"> Ruhat√°r bal</label><br>
                <label><input type="checkbox" name="role_jobb_${showCount}"> Ruhat√°r jobb</label><br>
                <label id="erkely_label_${showCount}" style="display:none;">
                    <input type="checkbox" name="role_erkely_${showCount}"> Ruhat√°r erk√©ly
                </label>
            </div>

            <hr>
        `;
        container.appendChild(div);
        showCount++;
        document.getElementById("num_shows").value = showCount;
    }

    function toggleErkely(input, index) {
        const label = document.getElementById(`erkely_label_${index}`);
        if (parseInt(input.value) >= 9) {
            label.style.display = "block";
        } else {
            label.style.display = "none";
            label.querySelector("input").checked = false;
        }
    }
    </script>
</head>

<body>

<h2>Beoszt√°s adatok</h2>

<!-- üîπ EXCEL OPCI√ì -->
<p>
<b>üìä Excelb≈ël szeretn√©d bet√∂lteni az adatokat?</b><br>
<a href="{{ url_for('upload_excel') }}">‚û° Excel felt√∂lt√©se</a>
</p>

<hr>

<!-- üîπ K√âZI ADATBEVITEL -->
<form method="POST">

<h3>Dolgoz√≥k</h3>
<input type="hidden" id="num_workers" name="num_workers" value="0">
<div id="workers_form"></div>
<button type="button" onclick="addWorker()">‚ûï Dolgoz√≥ hozz√°ad√°sa</button>

<hr>

<h3>M≈±szakok</h3>
<input type="hidden" id="num_shows" name="num_shows" value="0">
<div id="shows_form"></div>
<button type="button" onclick="addShow()">‚ûï M≈±szak hozz√°ad√°sa</button>

<br><br>
<button type="submit">üìÖ Beoszt√°s gener√°l√°sa</button>

</form>

</body>
</html>
